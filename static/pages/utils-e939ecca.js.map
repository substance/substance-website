{"version":3,"file":"utils-e939ecca.js","sources":["../../../src/PlatformConstants.js","../../../src/utils.js"],"sourcesContent":["// DB stored document props\nexport const DOCUMENT_TITLE = 'title'\nexport const DOCUMENT_AUTHORS = 'authors'\nexport const DOCUMENT_UPDATED_AT = 'updatedAt'\nexport const DOCUMENT_PUBLISHED_AT = 'publishedAt'\nexport const DOCUMENT_STATE = 'state'\nexport const DOCUMENT_SIZE = 'fileSize'\nexport const DOCUMENT_OWNER = 'owner'\nexport const DOCUMENT_SLUG = 'name'\n\nexport const DOCUMENT_DB_TO_INTERNAL = {\n  title: DOCUMENT_TITLE,\n  authors: DOCUMENT_AUTHORS,\n  modified: DOCUMENT_UPDATED_AT,\n  published: DOCUMENT_PUBLISHED_AT,\n  state: DOCUMENT_STATE,\n  size: DOCUMENT_SIZE,\n  owner: DOCUMENT_OWNER,\n  slug: DOCUMENT_SLUG\n}\n\nexport const DOCUMENT_STATE_ICONS = {\n  published: 'globe-americas',\n  private: 'key'\n}\n","import { DOCUMENT_DB_TO_INTERNAL } from './PlatformConstants'\n\nexport function GetRelativeTime (timestamp) {\n  const msPerMinute = 60 * 1000\n  const msPerHour = msPerMinute * 60\n  const msPerDay = msPerHour * 24\n  const msPerMonth = msPerDay * 30\n  const msPerYear = msPerDay * 365\n\n  const current = Date.now()\n  const elapsed = current - timestamp\n\n  if (elapsed < msPerMinute) {\n    return Math.round(elapsed / 1000) + ' seconds ago'\n  } else if (elapsed < msPerHour) {\n    return Math.round(elapsed / msPerMinute) + ' minutes ago'\n  } else if (elapsed < msPerDay) {\n    return Math.round(elapsed / msPerHour) + ' hours ago'\n  } else if (elapsed < msPerMonth) {\n    return Math.round(elapsed / msPerDay) + ' days ago'\n  } else if (elapsed < msPerYear) {\n    return Math.round(elapsed / msPerMonth) + ' months ago'\n  } else {\n    return Math.round(elapsed / msPerYear) + ' years ago'\n  }\n}\n\nexport function FormatBytes (bytes, decimals = 2) {\n  if (bytes === 0) return '0 Bytes'\n\n  const k = 1024\n  const dm = decimals < 0 ? 0 : decimals\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\n\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\n\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i]\n}\n\n// A helper to obtain document props for avoiding problems with different names of properties inside DB,\n// using constant with map from DB to clientside impl\nexport function GetDocumentProps (document) {\n  return Object.keys(DOCUMENT_DB_TO_INTERNAL).reduce((acc, item) => {\n    let val\n    // ATTENTION: fileSize is a future feature\n    if (item === 'size') {\n      val = 1234\n    // TODO: we will not have multi-authors for quite a time\n    // and then this will have a different format, i.e. public user records\n    // not just plain strings\n    } else if (item === 'authors') {\n      val = []\n    // TODO: 'private' vs 'public' is not in the db, but needs to be provided as a derived\n    // property from the versions\n    } else if (item === 'state') {\n      val = document.hasPublicVersion ? 'public' : 'private'\n    } else {\n      val = document[DOCUMENT_DB_TO_INTERNAL[item]]\n    }\n    acc[item] = val\n    return acc\n  }, {})\n}\n\n// A helper to build urls different document urls\n// e.g. for document editing, previewing\nexport function GetDocumentLink (document, type) {\n  const slug = document[DOCUMENT_DB_TO_INTERNAL.slug]\n  const owner = document[DOCUMENT_DB_TO_INTERNAL.owner]\n\n  let url = `/${owner}/${slug}`\n\n  if (type === 'preview') {\n    url += '?preview=true'\n  }\n\n  return url\n}\n"],"names":[],"mappings":"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"}