{"version":3,"file":"SignupForm-789a17ff.js","sources":["../../../src/SignupForm.js"],"sourcesContent":["import { Component, $$, Button, Input, Form, FormRow } from 'substance'\nimport PageDialog from './PageDialog'\nimport Paragraph from './Paragraph'\nimport Strong from './Strong'\nimport _sendRequest from './_sendRequest'\n\nexport default class SignupForm extends Component {\n  getFormIntroduction () {\n    return 'Please specify your email, you\\'ll be able to sign in later using this address.'\n  }\n\n  getFormName () {\n    return 'Sign Up'\n  }\n\n  getFormUrl () {\n    return '/api/signUp'\n  }\n\n  render () {\n    return $$('form', { class: 'sc-signup-form' },\n      this.state.success\n        ? this.renderSuccessMessage()\n        : this.renderForm()\n    )\n  }\n\n  renderForm () {\n    return $$(PageDialog, { size: 'small', title: this.getFormName(), hint: 'We will send you an email with further information.' },\n      $$(Form, {},\n        $$(FormRow, {},\n          $$(Paragraph, {}, this.getFormIntroduction())\n        ),\n        $$(FormRow, { label: 'Email', error: this.state.message },\n          $$(Input, { ref: 'email', name: 'email', autofocus: true })\n        ),\n        $$(Button, { style: 'primary', disabled: this.state.saving }, this.getFormName())\n          .on('click', this.submitForm)\n      )\n    )\n  }\n\n  renderSuccessMessage () {\n    return $$(PageDialog, { size: 'small', title: 'Thank you!' },\n      $$(Paragraph, {},\n        'We sent you a temporary login link.',\n        $$('br'),\n        'Please check you email at'\n      ),\n      $$(Paragraph, {},\n        $$(Strong, {}, this.state.email)\n      )\n    )\n  }\n\n  async submitForm () {\n    const email = this.refs.email.val()\n\n    this.setState({\n      error: false,\n      success: false,\n      saving: true\n    })\n\n    const result = await _sendRequest({\n      method: 'POST',\n      url: this.getFormUrl(),\n      json: true,\n      data: {\n        email\n      }\n    })\n    if (result.fail) {\n      this.setState({\n        fail: true,\n        message: result.message,\n        saving: false\n      })\n    } else {\n      this.setState({\n        fail: false,\n        success: true,\n        saving: false,\n        email\n      })\n    }\n  }\n}\n"],"names":["_sendRequest"],"mappings":"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"}